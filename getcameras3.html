<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	
<script>
$( document ).ready(function(){
window.alert("ready!");	
generatesiteid();

	
});
	
	
function generatesiteid(){ //Path to siteIds
	
window.alert("inside Gerenate function");
 var resultsiteid = "";
	 jQuery.ajax({
		 url: 'https://services1.arcgis.com/AVP60cs0Q9PEA8rH/ArcGIS/rest/services/TrafficCameras_Public/FeatureServer/0/query?where=1%3D1&outFields=*&returnGeometry=true&outSR=4326&f=pjson',
		 type: "GET",
		  contentType: "text/plain",
          dataType: "text",
	 success: function( data )
	{
    //window.alert("Data came back is:" + data);
		$("div#databackis").text(data);

		var text = data ;
		var obj = JSON.parse(text);
		//var resultsiteid  = obj["site-id"];
		(function(cb) { var xyz = resultsiteid; cb(xyz); })(getsiteidvalue);
}  ,
		  async: false
});
return resultsiteid;
		
}

var getsiteidvalue = function(xyz) {
googleurl = xyz;
window.alert(xyz);
}

    
    


</script>
	
	
</head>
<body>	
<H2>Get Cameras object</H2>
	<div id="databackis"></div>
	</body>
</html>

