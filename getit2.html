<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>

<p id="myparagraph">hello</p>
	<form id="thisformshouldsubmit" onsubmit="return validateForm()" >
	<input type="text">
	<input type="submit" name"button" value="Mybutton">
	</form>
<script>
	
console.log( "ready!" );
var flag = false;
	
function validateForm() {

var inner = function(x) {console.log("FORM IS:" + x );$("#myparagraph").html("this is" + x);}

$.get( "https://liz-ish.github.io/frogbotherchatapp/returnmyobject.js", function( data ){
console.log("here it is:");
console.log("Data Loaded:" + data);

	var text = data ;
		var obj = JSON.parse(text);
		var resultsuccess = obj["success"];
		var resultscore = obj["score"];
		console.log(resultsuccess + " and score is " + resultscore );
		if ( obj["success"] == "false" )
		{
		console.log("Safe Connection - ready to submit"  );
		//window.alert('good to go');
	flag =  true;
		} 
		else 
		{
		console.log("Will not submit"  ); 
		flag =   false;
	        $("#myparagraph").html("this should change now!");
	 	}

(function(cb) { var x = flag; cb(x); })(inner);	

		
	
});
	
	
console.log(inner.x);	
return inner.x;
}
	
	
	


console.log("global flag is " + flag);


 // The last brackets execute the outer function

	
	
	
	
	
	</script>		



</body>

</html>
		
